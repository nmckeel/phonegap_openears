<!doctype html>
<html>
  <head>
    <title>PhoneGap!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
      <script src="jquery-1.6.1.min.js"></script>
      <script src="phonegap.0.9.5.1.min.js"></script>
      <script src="openEarsPlugin.js"></script>
      <script type="text/javascript" charset="utf-8">

        $(document).ready(function(){
          $(document).bind('deviceready', function(){
            openears = window.plugins.openEarsPlugin;

            openears.setCallback('pocketsphinxDidReceiveHypothesis', function(hypothesis, recognitionScore, utteranceID){
                $('BODY').append('<h1>'+hypothesis+',&nbsp;&nbsp;'+recognitionScore+',&nbsp;&nbsp;'+utteranceID+'</h1>');
            });

            openears.setCallback('pocketsphinxDidChangeLanguageModelToFile', function(path){
                $('BODY').append('<h1>Changed Language Model to Path: '+path+'</h1>');
            });

            function fail(msg){
                $('BODY').append('<h1>'+msg+'</h1>');
            }
            var options = {
                languagemodel: 'rhymbes1.languagemodel'
              , dictionary: 'rhymbes1.dic'
            }
            openears.startAudioSession();
            openears.startListeningWithLanguageModelAtPath(options);
                           
            function change_language_model(){
              var options = {
                 languagemodel: 'rhymbes2.languagemodel'
               , dictionary: 'rhymbes2.dic'
              }
              openears.changeLanguageModelToFile(options);
            }
            
            //openears.suspendRecognition();
            //openears.resumeRecognition();
            //openears.stopListening();
            
            $('#change').click(change_language_model);
            
          });
        })    
        
      </script>    
  </head>
  <body>
    <span id="change">Change Language Model</span>
  </body>
</html>
